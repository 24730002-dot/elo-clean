<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ELO - ì´ìˆ˜ ë‚´ì—­ í™•ì¸ì„œ</title>
<style>
  * { box-sizing: border-box; margin: 0; padding: 0; }
  body { font-family: "Pretendard", sans-serif; background: #f5f5f5; color: #333; display: flex; flex-direction: column; min-height: 100vh; }

  /* ===== HEADER ===== */
  .top-bar {
    position: fixed;
    top: 0; left: 0;
    width: 100%;
    background: rgba(0,0,0,0.35);
    backdrop-filter: blur(4px);
    color: white;
    z-index: 1000;
  }

  header {
    text-align: center;
    font-size: 1.6rem;
    font-weight: 700;
    padding: 16px 0 10px;
    letter-spacing: 0.3px;
  }

  header a {
    text-decoration: none;
    color: white;
    transition: opacity 0.3s;
  }
  header a:hover { opacity: 0.75; }

  /* âœ… Grid ê¸°ë°˜ ì¤‘ì•™ ì •ë ¬ */
  nav {
    display: grid;
    grid-template-columns: 1fr auto 1fr; /* ì¢Œ Â· ì¤‘ì•™ Â· ìš° */
    align-items: center;
    padding: 12px 40px;
    border-top: 1px solid rgba(255,255,255,0.15);
    box-sizing: border-box;
  }

  .nav-center {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 100px;
    grid-column: 2;
  }

  .nav-right {
    display: flex;
    justify-content: flex-end;
    gap: 20px;
    grid-column: 3;
  }

  nav a {
    text-decoration: none;
    color: white;
    font-weight: 500;
    transition: color 0.25s;
  }
  nav a:hover { color: #b9b9b9; }

  @media (max-width: 768px) {
    nav {
      grid-template-columns: 1fr;
      gap: 12px;
      padding: 12px 20px;
    }
    .nav-center {
      flex-wrap: wrap;
      gap: 40px;
      justify-content: center;
    }
    .nav-right { justify-content: center; }
  }

  /* ===== MAIN ===== */
  main {
    flex: 1;
    display: flex;
    justify-content: center;
    align-items: center;
    flex-direction: column;
    padding-top: 180px;
    padding-bottom: 80px;
  }

  .record-card {
    background: white;
    border: 1px solid #ccc;
    border-radius: 15px;
    width: 100%;
    max-width: 750px;
    padding: 50px 40px;
    box-shadow: 0 4px 20px rgba(0,0,0,0.1);
    text-align: center;
  }

  .record-card h1 {
    font-size: 1.9rem;
    margin-bottom: 15px;
    color: #222;
  }

  .record-card p.intro {
    font-size: 1rem;
    color: #555;
    margin-bottom: 35px;
    line-height: 1.6;
  }

  .record-info {
    text-align: left;
    border-top: 2px solid #0078d4;
    border-bottom: 2px solid #0078d4;
    padding: 20px 10px;
    margin-bottom: 25px;
  }
  .record-info p {
    font-size: 1rem;
    line-height: 1.8;
  }
  .record-info b {
    color: #0078d4;
  }

  .modules {
    background: #fafafa;
    border-radius: 10px;
    padding: 20px;
    margin-bottom: 30px;
  }
  .modules h3 {
    text-align: left;
    font-size: 1.1rem;
    margin-bottom: 10px;
    color: #333;
  }
  .modules ul { list-style: none; text-align: left; }
  .modules li {
    margin: 8px 0;
    font-size: 0.95rem;
    color: #555;
  }

  .actions {
    display: flex;
    gap: 20px;
    justify-content: center;
  }
  .actions button {
    background: #3b3b3bcc;
    border: none;
    border-radius: 10px;
    color: white;
    font-weight: bold;
    font-size: 1rem;
    padding: 12px 24px;
    cursor: pointer;
    transition: background 0.3s;
  }
  .actions button:hover { background: #2a2a2a99; }

  /* ===== FOOTER ===== */
  footer.footer {
    background-color: rgba(255, 255, 255, 0.7);
    text-align: center;
    padding: 35px 20px;
    color: #444;
    font-size: 14px;
    line-height: 1.6;
    border-top: 1px solid rgba(0, 0, 0, 0.1);
    backdrop-filter: blur(8px);
  }

  .footer-links { margin-bottom: 12px; }
  .footer-links a {
    color: #222;
    text-decoration: none;
    font-weight: 500;
    transition: color 0.2s;
  }
  .footer-links a:hover { color: #0078d4; }
  .footer-links span { margin: 0 8px; color: #aaa; }
  .footer-info p { margin: 4px 0; }
  .footer-info a { color: #0078d4; text-decoration: none; }
  .footer-info a:hover { text-decoration: underline; }
  .footer-copy { margin-top: 14px; font-size: 13px; color: #666; }

  /* ===== PRINT MODE ===== */
  @media print {
    .top-bar, .actions, footer { display: none; }
    .record-card { box-shadow: none; border: 1px solid #999; margin: 0; }
  }
</style>
</head>
<body>

<!-- âœ… HEADER -->
<div class="top-bar">
  <header id="top"><a href="index.html">Elo</a></header>
  <nav>
    <div class="nav-center">
      <a href="intro.html">ì†Œê°œ</a>
      <a href="course_application.html">ì¸í„°ë„·êµìœ¡</a>
      <a href="my_classroom.html">ë‚˜ì˜ ê°•ì˜ì‹¤</a>
      <a href="notice.html">êµìœ¡ì§€ì›</a>
    </div>
<div class="nav-right">
  <a id="loginMenu" href="login.html">ë¡œê·¸ì¸</a>
  <a id="joinMenu" href="join.html">íšŒì›ê°€ì…</a>

  <a id="mypageMenu" href="mypage.html" style="display:none;">ë§ˆì´í˜ì´ì§€</a>
  <a id="logoutMenu" href="#" style="display:none;" onclick="logout()">ë¡œê·¸ì•„ì›ƒ</a>
</div>

  </nav>
</div>

<!-- âœ… MAIN -->
<main>
  <div class="record-card">
    <h1>ì´ìˆ˜ ë‚´ì—­ í™•ì¸ì„œ</h1>
    <p class="intro">
      ì•„ë˜ í•™ìŠµìëŠ” ELO ì œì¡°ì•ˆì „êµìœ¡ í”Œë«í¼ì—ì„œ ì œê³µí•˜ëŠ”  
      ìˆí¼ í•™ìŠµ ì½˜í…ì¸ ë¥¼ ëª¨ë‘ ì´ìˆ˜í•˜ì˜€ìŒì„ í™•ì¸í•©ë‹ˆë‹¤.
    </p>

<div class="record-info" id="user-info">
  </div>

<div class="modules">
  <h3></h3>
  <ul id="completed-modules-list">
    </ul>
</div>

    <p style="font-size:0.95rem; color:#555;">
      â€» ë³¸ í™•ì¸ì„œëŠ” ìˆí¼ í•™ìŠµ ì´ìˆ˜ ë‚´ì—­ì„ ì¦ëª…í•˜ê¸° ìœ„í•œ ìë£Œì´ë©°,  
      ì •ì‹ ìˆ˜ë£Œì¦ê³¼ëŠ” ë³„ë„ë¡œ ë°œê¸‰ë©ë‹ˆë‹¤.
    </p><br>

    <div class="actions">
      <button onclick="window.print()">ì¸ì‡„í•˜ê¸°</button>
      <button onclick="window.print()">PDFë¡œ ì €ì¥</button>
    </div>
  </div>
</main>

<!-- âœ… FOOTER -->
<footer class="footer">
  <div class="footer-links">
    <a href="#">ê°œì¸ì •ë³´ì²˜ë¦¬ë°©ì¹¨</a>
    <span>|</span>
    <a href="#">ê´€ë ¨ì‚¬ì´íŠ¸ ë°”ë¡œê°€ê¸°</a>
  </div>
  <div class="footer-info">
    <p>ì£¼ì†Œ: ì„œìš¸íŠ¹ë³„ì‹œ ì¤‘êµ¬ ì†ŒíŒŒë¡œ2ê¸¸ 10</p>
    <p>ì „í™”: 02-1234-5678</p>
    <p>ê³ ê°ì§€ì›: <a href="#">ë‹´ë‹¹ì ì—°ë½ì²˜ ë°”ë¡œê°€ê¸°</a> (í‰ì¼ 09:00~18:00)</p>
  </div>
  <div class="footer-copy">
    COPYRIGHT 2025 Â© KOSHA ALL RIGHT RESERVED.
  </div>
</footer>


<script>
const userKR = localStorage.getItem("currentUser");

// ë¡œê·¸ì¸ ì—¬ë¶€ ë¨¼ì € í™•ì¸
if (!userKR) {
  alert("ì´ìˆ˜ì¦ì€ ë¡œê·¸ì¸ í›„ ì´ìš© ê°€ëŠ¥í•©ë‹ˆë‹¤.");
  window.location.href = "login.html";
} else {
  // ë¡œê·¸ì¸ ìƒíƒœë¼ë©´ í—¤ë” ë³€ê²½
  document.querySelectorAll('a[href="login.html"], a[href="join.html"]').forEach(a => {
    a.style.display = "none";
  });

  const navRight = document.querySelector(".nav-right");

  // ë§ˆì´í˜ì´ì§€ ë§í¬ ì¶”ê°€
  const myPageBtn = document.createElement("a");
  myPageBtn.href = "mypage.html";
  myPageBtn.textContent = "ë§ˆì´í˜ì´ì§€";

  // ë¡œê·¸ì•„ì›ƒ ì¶”ê°€
  const logoutBtn = document.createElement("a");
  logoutBtn.href = "#";
  logoutBtn.textContent = "ë¡œê·¸ì•„ì›ƒ";
  logoutBtn.onclick = function () {
    localStorage.removeItem("currentUser");
    alert("ë¡œê·¸ì•„ì›ƒë˜ì—ˆìŠµë‹ˆë‹¤.");
    location.href = "index.html";
  };

  navRight.appendChild(myPageBtn);
  navRight.appendChild(logoutBtn);
}
</script>

<script>
// =========================================================================
// ğŸš€ ê³µí†µ ê¸°ëŠ¥ (ë¡œê·¸ì•„ì›ƒ í•¨ìˆ˜)
// =========================================================================
function logout() {
Â  Â  localStorage.removeItem("currentUser");
Â  Â  alert("ë¡œê·¸ì•„ì›ƒë˜ì—ˆìŠµë‹ˆë‹¤.");
Â  Â  location.href = "index.html";
}


// =========================================================================
// ğŸš€ print.html ë°ì´í„° ë¡œë“œ ë° ë Œë”ë§ (ë©”ë‰´ í† ê¸€ ë¡œì§ í¬í•¨)
// =========================================================================

document.addEventListener("DOMContentLoaded", async () => {
Â  Â  // 1. ë¡œê·¸ì¸ ìƒíƒœ í™•ì¸ ë° ë©”ë‰´ í† ê¸€ (HTMLì— ì •ì˜ëœ ID ìš”ì†Œ ì‚¬ìš©)
Â  Â  const user = localStorage.getItem("currentUser");
Â  Â  
Â  Â  if (!user) {
Â  Â  Â  Â  // ë¡œê·¸ì¸ë˜ì§€ ì•Šì€ ê²½ìš°: ë¡œê·¸ì¸/íšŒì›ê°€ì…ë§Œ í‘œì‹œ
Â  Â  Â  Â  alert("ì´ìˆ˜ì¦ì€ ë¡œê·¸ì¸ í›„ ì´ìš© ê°€ëŠ¥í•©ë‹ˆë‹¤.");
Â  Â  Â  Â  window.location.href = "login.html";
Â  Â  Â  Â  return;
Â  Â  } else {
Â  Â  Â  Â  // ë¡œê·¸ì¸ëœ ê²½ìš°: ë§ˆì´í˜ì´ì§€/ë¡œê·¸ì•„ì›ƒë§Œ í‘œì‹œ
Â  Â  Â  Â  document.getElementById("loginMenu").style.display = "none";
Â  Â  Â  Â  document.getElementById("joinMenu").style.display = "none";
Â  Â  Â  Â  document.getElementById("mypageMenu").style.display = "block";
Â  Â  Â  Â  document.getElementById("logoutMenu").style.display = "block";
Â  Â  }

Â  Â  // 2. my_classroomì—ì„œ ì „ë‹¬ë°›ì€ printData ë¡œë“œ
Â  Â  const printDataJSON = localStorage.getItem("currentPrintData");
Â  Â  const printData = printDataJSON ? JSON.parse(printDataJSON) : null;

Â  Â  if (!printData) {
Â  Â  Â  Â  alert("ì¶œë ¥í•  ì´ìˆ˜ ë‚´ì—­ ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤. ë‚˜ì˜ ê°•ì˜ì‹¤ì—ì„œ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.");
Â  Â  Â  Â  window.location.href = "my_classroom.html";
Â  Â  Â  Â  return;
Â  Â  }

Â  Â  // 3. ë°±ì—”ë“œì—ì„œ ìƒì„¸ ëª¨ë“ˆ ëª©ë¡ ê°€ì ¸ì˜¤ê¸° (printData.titleì„ ê¸°ì¤€ìœ¼ë¡œ ì¡°íšŒ)
Â  Â  const MODULE_API_URL = 'https://elo-backend-5r5z.onrender.com/course/modules'; 

Â  Â  try {
Â  Â  Â  Â  const res = await fetch(`${MODULE_API_URL}?title=${encodeURIComponent(printData.title)}`);
Â  Â  Â  Â  const result = await res.json();
Â  Â  Â  Â  
Â  Â  Â  Â  const moduleListElement = document.getElementById('completed-modules-list');
Â  Â  Â  Â  const userInfoElement = document.getElementById('user-info');

Â  Â  Â  Â  // 4. ì‚¬ìš©ì ì •ë³´ í‘œì‹œ
Â  Â  Â  Â  userInfoElement.innerHTML = `
Â  Â  Â  Â  Â  Â  <p><b>ì´ë¦„:</b> ${printData.userName || user}</p>
Â  Â  Â  Â  Â  Â  <p><b>ì†Œì†:</b> ELO</p>
Â  Â  Â  Â  Â  Â  <p><b>ì´ìˆ˜ ê³¼ì •:</b> ${printData.title}</p>
Â  Â  Â  Â  Â  Â  <p><b>ì´ìˆ˜ ì¼ì:</b> ${printData.completionDate}</p>
Â  Â  Â  Â  `;

Â  Â  Â  Â  // 5. ëª¨ë“ˆ ëª©ë¡ í‘œì‹œ
Â  Â  Â  Â  if (result.success && result.modules && result.modules.length > 0) {
Â  Â  Â  Â  Â  Â  moduleListElement.innerHTML = result.modules.map((module, index) => 
Â  Â  Â  Â  Â  Â  Â  Â  // ëª¨ë“ˆì´ ê°ì²´ì¼ ê²½ìš° module.title, ë¬¸ìì—´ì¼ ê²½ìš° module ì‚¬ìš©
Â  Â  Â  Â  Â  Â  Â  Â  `<li>${index + 1}ï¸âƒ£ ${module.title || module}</li>` 
Â  Â  Â  Â  Â  Â  ).join('');
Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  // ê°•ì˜ë¥¼ ì°¾ì•˜ìœ¼ë‚˜ ëª¨ë“ˆ ëª©ë¡ì´ ì—†ê±°ë‚˜ (ë©”ì‹œì§€ ì‚­ì œ)
Â  Â  Â  Â  Â  Â  moduleListElement.innerHTML = `<li>í•´ë‹¹ ê³¼ì •ì˜ í•™ìŠµ ëª¨ë“ˆ ëª©ë¡ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</li>`;
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  // 5-1. ëª¨ë“ˆ ì œëª©ì´ ë¹„ì–´ìˆì—ˆìœ¼ë¯€ë¡œ ì±„ì›Œì¤ë‹ˆë‹¤.
Â  Â  Â  Â  document.querySelector('.modules h3').textContent = 'ğŸ“˜ ì´ìˆ˜í•œ í•™ìŠµ ëª¨ë“ˆ';


Â  Â  } catch (error) {
Â  Â  Â  Â  console.error("ì´ìˆ˜ ë‚´ì—­(ëª¨ë“ˆ) ë¡œë“œ ì¤‘ ì˜¤ë¥˜ ë°œìƒ:", error);
Â  Â  Â  Â  document.getElementById('completed-modules-list').innerHTML = `<li style="color:red;">ëª¨ë“ˆ ëª©ë¡ ë¡œë“œ ì˜¤ë¥˜: ${error.message}</li>`;
Â  Â  }
});
</script>

</body>
</html>
