<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ELO - Shorts</title>
<style>
  * { box-sizing:border-box; margin:0; padding:0; scroll-behavior:smooth; }
  body { font-family:"Pretendard",sans-serif; background:#ffffff; color:#333; min-height:100vh; display:flex; flex-direction:column; }

  /* HEADER */
  .top-bar {
    position:fixed;
    top:0; left:0; width:100%;
    background:rgba(0,0,0,0.35);
    backdrop-filter:blur(4px);
    color:white; z-index:1000;
  }
  header { text-align:center; font-size:1.5rem; padding:15px 0 10px; }
  header a { text-decoration:none; color:white; font-weight:bold; }
  nav { display:grid; grid-template-columns:1fr auto 1fr; align-items:center; padding:12px 40px; border-top:1px solid rgba(255,255,255,0.15); }
  .nav-center { display:flex; justify-content:center; gap:100px; grid-column:2; }
  .nav-right { display:flex; justify-content:flex-end; gap:20px; grid-column:3; }
  nav a { text-decoration:none; color:white; font-weight:500; }
  nav a:hover { color:#b9b9b9; }

  /* MAIN */
  main { flex:1; display:flex; justify-content:center; align-items:center; padding-top:180px; padding-bottom:80px; }
  .shorts-container { display:flex; flex-direction:column; align-items:center; justify-content:center; gap:20px; width:100%; max-width:600px; margin:0 auto; }
  .shorts-video { width:100%; aspect-ratio:9/16; border-radius:20px; overflow:hidden; box-shadow:0 4px 25px rgba(0,0,0,0.2); }
  .shorts-video video { width:100%; height:100%; object-fit:cover; border-radius:20px; }
  .shorts-caption { text-align:center; font-size:1rem; color:#555; }
/* Ïù¥ÏàòÏú® ÏòÅÏó≠ */
  .progress-area {
    text-align:center;
    margin-top:10px;
  }
  .progress-area p {
    margin:6px 0;
    font-size:1rem;
    color:#333;
  }
  .progress-area button {
    padding:10px 18px;
    font-size:0.95rem;
    border:none;
    border-radius:6px;
    background:#0078d4;
    color:white;
    cursor:pointer;
    transition:background 0.2s;
  }
  .progress-area button:disabled {
    background:#ccc;
    cursor:not-allowed;
  }
  .progress-area button:hover:not(:disabled) {
    background:#005fa3;
  }




  /* FOOTER */
  footer.footer {
    background-color:rgba(255,255,255,0.7);
    text-align:center; padding:35px 20px; color:#444;
    font-size:14px; line-height:1.6; border-top:1px solid rgba(0,0,0,0.1);
    backdrop-filter:blur(8px);
  }
</style>
</head>
<body>

<!-- ‚úÖ HEADER -->
<div class="top-bar">
  <header id="top"><a href="index_EN.html">Elo</a></header>
  <nav>
    <div class="nav-center">
      <a href="intro_EN.html">About</a>
      <a href="course_application_EN.html">Online Courses</a>
      <a href="my_classroom_EN.html">My Classroom</a>
      <a href="notice_EN.html">Support</a>
    </div>
<div class="nav-right">
  <a id="loginMenu_EN" href="login_EN.html">Login</a>
  <a id="joinMenu_EN" href="join_EN.html">Sign Up</a>

  <a id="mypageMenu_EN" href="Mypage_EN.html" style="display:none;">My Page</a>
  <a id="logoutMenu_EN" href="#" style="display:none;" onclick="logout_EN()">Logout</a>
</div>
  </nav>
</div>

<!-- ‚úÖ MAIN -->
<!-- ‚úÖ Main (Shorts Video - English Version) -->
<main>
  <div class="shorts-container">

    <div class="shorts-video">
      <video id="lectureVideo" controls muted playsinline>
        <source src="https://res.cloudinary.com/dr6fvp0qs/video/upload/v1763706833/a-spark-lasts-longer-than-your-coffee_70OnMUoq_tyomfv.mp4">
        Your browser does not support the video tag.
      </video>
    </div>

    <div class="shorts-caption">
      <b>[ELO Shorts]</b><br><br> For your safety! üé•
    </div>

    <div class="progress-area">
      <p id="status">Progress: 0%</p>
      <button id="completeBtn" disabled>Mark Complete</button>
    </div>

  </div>
</main>


<!-- ‚úÖ FOOTER -->
<footer class="footer">
  <div class="footer-links">
    <a href="#">Privacy Policy</a>
    <span>|</span>
    <a href="#">Related Sites</a>
  </div>
  <div class="footer-info">
    <p>Address: 10 Sopa-ro 2-gil, Jung-gu, Seoul</p>
    <p>Phone: +82-2-1234-5678</p>
    <p>Customer Support: <a href="#">Contact Our Team</a> (Mon‚ÄìFri 09:00‚Äì18:00)</p>
  </div>
  <div class="footer-copy">
    COPYRIGHT 2025 ¬© KOSHA ALL RIGHTS RESERVED.
  </div>
</footer>
<script>
  const video = document.getElementById('lectureVideo');
  const status = document.getElementById('status');
  const completeBtn = document.getElementById('completeBtn');

  /* ‚≠ê ÏòÅÏñ¥ Ï†úÎ™© Îß§Ìïë (ÌååÏùºÎ™Ö ‚Üí Ï†úÎ™©) */
  const titleMapEN = {
    "SHORT1_EN.html": "Opening & Manhole Safety",
    "SHORT2_EN.html": "Fall Prevention",
    "SHORT3_EN.html": "Gas Leak Response",
    "SHORT4_EN.html": "Clothing Safety to Prevent Entanglement",
    "SHORT5_EN.html": "PPE Importance",
    "SHORT6_EN.html": "Before Hot Work",
    "SHORT7_EN.html": "Fire Extinguisher Importance",
    "SHORT8_EN.html": "Preventing Clothing Hazards",
    "SHORT10_EN.html": "Earplug Importance",
    "SHORT11_EN.html": "Slip Prevention & Immediate Actions",
    "SHORT12_EN.html": "Finger Injury Prevention",
    "SHORT13_EN.html": "Eye Protection During Welding",
    "SHORT14_EN.html": "Forklift Safety Zone",
    "SHORT15_EN.html": "Why Helmets May Fail",
    "SHORT16_EN.html": "Emergency Evacuation",
    "SHORT17_EN.html": "Machine Operation Safety",
    "SHORT18_EN.html": "Safety Shoes Importance",
    "SHORT19_EN.html": "No Inspection During Operation",
    "SHORT20_EN.html": "Importance of Safety Gloves",
    "SHORT22_EN.html": "How AI Detects Danger",
    "SHORT23_EN.html": "Proper PPE Emphasis"
  };

  /* ÌòÑÏû¨ ÌååÏùºÎ™Ö ‚Üí ÏòÅÏñ¥ Ï†úÎ™© Îß§Ïπ≠ */
  let file = window.location.pathname.split("/").pop();
  const titleEN = titleMapEN[file];

  /* Í±¥ÎÑàÎõ∞Í∏∞ Î∞©ÏßÄ */
  let lastTime = 0;
  video.addEventListener("timeupdate", () => {
    const percent = (video.currentTime / video.duration) * 100;
    status.textContent = `Progress: ${percent.toFixed(1)}%`;

    if (video.currentTime - lastTime > 5) {
      video.currentTime = lastTime;
    } else {
      lastTime = video.currentTime;
    }
  });

  /* ÏôÑÎ£å Ïãú Î≤ÑÌäº ÌôúÏÑ±Ìôî */
  video.addEventListener("ended", () => {
    completeBtn.disabled = false;
    completeBtn.textContent = "Ready to Complete";
    status.textContent = "Progress: 100% (Completed)";
  });

  /* ‚≠ê ÏÑúÎ≤ÑÏóê 100% Ï†ÄÏû• */
  completeBtn.addEventListener("click", async () => {
    const userId = localStorage.getItem("currentUser");

    if (!titleEN) {
      alert("Error: Failed to match course title. Please check titleMapEN.");
      return;
    }

    alert("This course has been marked as completed!");

    await fetch("https://elo-backend-5r5z.onrender.com/progress/update", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({
        userId: userId,
        title: titleEN,   // ÏÑúÎ≤ÑÍ∞Ä ÏöîÍµ¨ÌïòÎäî ÏòÅÏñ¥ Ï†úÎ™©
        progress: 100
      })
    });
  });
</script>


</body>
</html>