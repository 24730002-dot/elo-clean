<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>ELO - Shorts</title>
<style>
  * { box-sizing: border-box; margin:0; padding:0; scroll-behavior:smooth; }
  body { font-family:"Pretendard", sans-serif; background:#ffffff; color:#333; min-height:100vh; display:flex; flex-direction:column; }

  /* ìƒë‹¨ ì „ì²´ ë˜í¼(header+nav) */
  .top-bar {
    position:fixed;
    top:0; left:0; width:100%;
    background: rgba(0,0,0,0.35);
    backdrop-filter: blur(4px);
    color:white;
    z-index:1000;
  }
  header { text-align:center; font-size:1.5rem; padding:15px 0 10px; }
  header a { text-decoration:none; color:white; font-weight:bold; }
  header a:hover { animation: blink 1s ease-in-out infinite alternate; }
  @keyframes blink { 0% { opacity: 1; } 50% { opacity: 0.3; } 100% { opacity: 1; } }

  nav { position: relative; width: 100%; padding:12px 20px; display:flex; align-items:center; border-top:1px solid rgba(255,255,255,0.15); }
  .nav-center { position: absolute; left: 50%; transform: translateX(-50%); display:flex; gap:100px; }
  .nav-right { margin-left:auto; display:flex; gap:15px; }
  nav a { text-decoration:none; color:white; font-weight:500; }
  nav a:hover { color: #b9b9b9; }

  /* ë©”ì¸ */
  main {
    flex:1;
    display:flex;
    justify-content:center;
    align-items:center;
    padding-top:180px; /* í—¤ë” ë†’ì´ë§Œí¼ ì—¬ìœ  í™•ë³´ */
    padding-bottom:80px;
  }

  /* ì‡¼ì¸  ì»¨í…Œì´ë„ˆ */
  .shorts-container {
    display:flex;
    flex-direction:column;
    align-items:center;
    justify-content:center;
    gap:20px;
    width:100%;
    max-width:500px;
    margin:0 auto;
  }

  .shorts-video {
    width:100%;
    aspect-ratio:9/16;
    border-radius:20px;
    overflow:hidden;
    box-shadow:0 4px 25px rgba(0,0,0,0.2);
  }

  .shorts-video video {
    width:100%;
    height:100%;
    object-fit:cover;
    border-radius:20px;
  }

  .shorts-caption {
    text-align:center;
    font-size:1rem;
    color:#555;
  }

  /* ì´ìˆ˜ìœ¨ ì˜ì—­ */
  .progress-area {
    text-align:center;
    margin-top:10px;
  }
  .progress-area p {
    margin:6px 0;
    font-size:1rem;
    color:#333;
  }
  .progress-area button {
    padding:10px 18px;
    font-size:0.95rem;
    border:none;
    border-radius:6px;
    background:#0078d4;
    color:white;
    cursor:pointer;
    transition:background 0.2s;
  }
  .progress-area button:disabled {
    background:#ccc;
    cursor:not-allowed;
  }
  .progress-area button:hover:not(:disabled) {
    background:#005fa3;
  }
  
  /* footer */
  footer.footer {
    background-color: rgba(255, 255, 255, 0.7);
    text-align: center;
    padding: 35px 20px;
    color: #444;
    font-size: 14px;
    line-height: 1.6;
    border-top: 1px solid rgba(0, 0, 0, 0.1);
    backdrop-filter: blur(8px);
  }
  .footer-links { margin-bottom: 12px; }
  .footer-links a { color: #222; text-decoration: none; font-weight: 500; transition: color 0.2s; }
  .footer-links a:hover { color: #0078d4; }
  .footer-links span { margin: 0 8px; color: #aaa; }
  .footer-info p { margin: 4px 0; }
  .footer-info a { color: #0078d4; text-decoration: none; }
  .footer-info a:hover { text-decoration: underline; }
  .footer-copy { margin-top: 14px; font-size: 13px; color: #666; }

  @media(max-width:480px){
    .shorts-container { max-width: 90%; }
  }
</style>
</head>
<body>

<!-- âœ… í—¤ë” ê³ ì • -->
<div class="top-bar">
  <header id="top"><a href="index.html">Elo</a></header>
  <nav>
    <div class="nav-center">
      <a href="intro.html">ì†Œê°œ</a>
      <a href="course_application.html">ì¸í„°ë„·êµìœ¡</a>
      <a href="my_classroom.html">ë‚˜ì˜ ê°•ì˜ì‹¤</a>
      <a href="notice.html">êµìœ¡ì§€ì›</a>
    </div>
<div class="nav-right">
  <a id="loginMenu" href="login.html">ë¡œê·¸ì¸</a>
  <a id="joinMenu" href="join.html">íšŒì›ê°€ì…</a>
  <a id="mypageMenu" href="mypage.html" style="display:none;">ë§ˆì´í˜ì´ì§€</a>
  <a id="logoutMenu" href="#" style="display:none;" onclick="logout()">ë¡œê·¸ì•„ì›ƒ</a>
</div>

  </nav>
</div>

<!-- âœ… ë©”ì¸ (ì‡¼ì¸  ì˜ìƒ) -->
<main>
  <div class="shorts-container">

    <div class="shorts-video">
      <video id="lectureVideo" controls muted playsinline>
        <source src="https://res.cloudinary.com/dr6fvp0qs/video/upload/v1763706825/%EC%95%88%EC%A0%84%EC%82%AC%EA%B3%A0-%EA%B0%9C%EA%B5%AC%EB%B6%80%EC%99%80_%EB%A7%A8%ED%99%80_oduovi.mp4" type="video/mp4">
        ë¸Œë¼ìš°ì €ê°€ ë™ì˜ìƒì„ ì§€ì›í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
      </video>
    </div>

    <div class="shorts-caption">
      <b>[ELO Shorts]</b><br><br> ë‹¹ì‹ ì˜ ì•ˆì „ì„ ìœ„í•´! ğŸ¥
    </div>

    <div class="progress-area">
      <p id="status">ì´ìˆ˜ìœ¨: 0%</p>
      <button id="completeBtn" disabled>ì´ìˆ˜ ì™„ë£Œ</button>
    </div>

  </div>
</main>



<!-- âœ… í‘¸í„° ê³ ì • -->
<footer class="footer">
  <div class="footer-links">
    <a href="#">ê°œì¸ì •ë³´ì²˜ë¦¬ë°©ì¹¨</a>
    <span>|</span>
    <a href="#">ê´€ë ¨ì‚¬ì´íŠ¸ ë°”ë¡œê°€ê¸°</a>
  </div>
  <div class="footer-info">
    <p>ì£¼ì†Œ: ì„œìš¸íŠ¹ë³„ì‹œ ì¤‘êµ¬ ì†ŒíŒŒë¡œ2ê¸¸ 10</p>
    <p>ì „í™”: 02-1234-5678</p>
    <p>ê³ ê°ì§€ì›: <a href="#">ë‹´ë‹¹ì ì—°ë½ì²˜ ë°”ë¡œê°€ê¸°</a> (í‰ì¼ 09:00~18:00)</p>
  </div>
  <div class="footer-copy">
    COPYRIGHT 2025 Â© KOSHA ALL RIGHT RESERVED.
  </div>
</footer>

<!-- âœ… JS ìŠ¤í¬ë¦½íŠ¸ -->
<script>
  const video = document.getElementById('lectureVideo');
  const status = document.getElementById('status');
  const completeBtn = document.getElementById('completeBtn');

  let lastTime = 0;

  video.addEventListener('timeupdate', () => {
    const percent = (video.currentTime / video.duration) * 100;
    status.textContent = `ì´ìˆ˜ìœ¨: ${percent.toFixed(1)}%`;

    if (video.currentTime - lastTime > 5) {
      video.currentTime = lastTime;
    } else {
      lastTime = video.currentTime;
    }
  });

  video.addEventListener('ended', () => {
    completeBtn.disabled = false;
    completeBtn.textContent = "ì´ìˆ˜ ì™„ë£Œ ì²˜ë¦¬ ê°€ëŠ¥";
    status.textContent = "ì´ìˆ˜ìœ¨: 100% (ì™„ë£Œ)";
  });

  // â­ ë²„íŠ¼ í´ë¦­ ì‹œ ë°±ì—”ë“œì— 100% ì €ì¥
completeBtn.addEventListener('click', async () => {
  alert("ì´ìˆ˜ ì™„ë£Œë¡œ ê¸°ë¡ë˜ì—ˆìŠµë‹ˆë‹¤!");

  let file = window.location.pathname.split("/").pop();
  if (!file.endsWith(".html")) file += ".html";

  await updateProgress(file);
});

</script>

<script>
async function updateProgress(link) {
  const userId = localStorage.getItem("currentUser");
  if (!userId) return;

  await fetch("https://elo-backend-5r5z.onrender.com/progress/update", {
    method: "POST",
    headers: {"Content-Type": "application/json"},
    body: JSON.stringify({
      userId: userId,
      courseId: link,
      progress: 100
    })
  });
}
</script>

<script>
document.addEventListener("DOMContentLoaded", () => {
  const user = localStorage.getItem("currentUser");

  if (user) {
    document.getElementById("loginMenu").style.display = "none";
    document.getElementById("joinMenu").style.display = "none";
    document.getElementById("mypageMenu").style.display = "block";
    document.getElementById("logoutMenu").style.display = "block";
  } else {
    document.getElementById("loginMenu").style.display = "block";
    document.getElementById("joinMenu").style.display = "block";
    document.getElementById("mypageMenu").style.display = "none";
    document.getElementById("logoutMenu").style.display = "none";
  }
});
</script>





</body>
</html>
