<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>ë‚˜ì˜ ê°•ì˜ì‹¤ - ELO ì•ˆì „êµìœ¡ í”Œë«í¼</title>
<style>
  /* === [1] ë©”ì¸ í™ˆ(í”Œë«í¼ í™ˆ.html)ì—ì„œ ê°€ì ¸ì˜¨ ê³µí†µ ìŠ¤íƒ€ì¼ === */
  * { box-sizing: border-box; margin:0; padding:0; scroll-behavior:smooth; }
  body { font-family:"Pretendard", sans-serif; background:#fafafa; color:#333; }

  /* ìƒë‹¨ ì „ì²´ ë˜í¼(header+navë¥¼ í•˜ë‚˜ì²˜ëŸ¼) */
  .top-bar {
    position:fixed;
    top:0; left:0; width:100%;
    background: rgba(0,0,0,0.35);
    backdrop-filter: blur(4px);
    color:white;
    z-index:1000;
  }

  /* í—¤ë” */
  header { text-align:center; font-size:1.5rem; padding:15px 0 10px; }
  header a { text-decoration:none; color:white; font-weight:bold; }
  header a:hover { animation: blink 1s ease-in-out infinite alternate; }

  @keyframes blink {
    0% { opacity: 1; }
    50% { opacity: 0.3; }
    100% { opacity: 1; }
  }

  /* ë„¤ë¹„ (ìš”ì²­í•˜ì‹  100px gap ì ìš©) */
  nav { position: relative; width: 100%; padding:12px 20px; display:flex; align-items:center; border-top:1px solid rgba(255,255,255,0.15); }
  .nav-center { position: absolute; left: 50%; transform: translateX(-50%); display:flex; gap:100px; }
  .nav-right { margin-left:auto; display:flex; gap:15px; }
  nav a { text-decoration:none; color:white; font-weight:500; }
  nav a:hover { color: #b9b9b9; }
  
  /* footer */
  footer.footer { background-color: rgba(255, 255, 255, 0.7); text-align: center; padding: 35px 20px; color: #444; font-size: 14px; line-height: 1.6; border-top: 1px solid rgba(0, 0, 0, 0.1); backdrop-filter: blur(8px); margin-top: 60px; }
  .footer-links { margin-bottom: 12px; }
  .footer-links a { color: #222; text-decoration: none; font-weight: 500; transition: color 0.2s; }
  .footer-links a:hover { color: #0078d4; }
  .footer-links span { margin: 0 8px; color: #aaa; }
  .footer-info p { margin: 4px 0; }
  .footer-info a { color: #0078d4; text-decoration: none; }
  .footer-info a:hover { text-decoration: underline; }
  .footer-copy { margin-top: 14px; font-size: 13px; color: #666; }

  /* === [2] ì´ í˜ì´ì§€(ë‚˜ì˜ ê°•ì˜ì‹¤) ì „ìš© ìŠ¤íƒ€ì¼ === */

  /* í˜ì´ì§€ ì „ì²´ ë˜í¼ */
  .page-wrapper {
    padding-top: 100px; /* .top-bar ë†’ì´ë§Œí¼ ì—¬ë°± */
    min-height: 100vh;
  }

  /* ì½˜í…ì¸  ì»¨í…Œì´ë„ˆ */
  .content-container {
    width: 90%;
    max-width: 1200px;
    margin: 40px auto;
    background: #fff;
    padding: 30px;
    border-radius: 15px;
    box-shadow: 0 5px 15px rgba(0,0,0,0.08);
  }

  /* í˜ì´ì§€ ì œëª© */
  .page-title {
    font-size: 2.2rem;
    font-weight: bold;
    text-align: center;
    margin-bottom: 30px;
  }

  /* ìƒë‹¨ í•™ìŠµ í˜„í™© ëŒ€ì‹œë³´ë“œ (ì´ë¯¸ì§€ 2 ì°¸ê³ ) */
  .status-dashboard {
    display: flex;
    gap: 20px;
    margin-bottom: 40px;
  }
  .status-box {
    flex: 1;
    background: #f9f9f9;
    border: 1px solid #e9e9e9;
    border-radius: 10px;
    padding: 20px;
    text-align: center;
    transition: all 0.2s ease;
  }
  .status-box:hover {
    transform: translateY(-5px);
    box-shadow: 0 4px 12px rgba(0,0,0,0.08);
  }
  .status-box .status-title {
    font-size: 1rem;
    font-weight: 500;
    color: #666;
    margin-bottom: 10px;
  }
  .status-box .status-count {
    font-size: 2.5rem;
    font-weight: bold;
    color: #333;
  }
  
  /* ê°•ì˜ ë¦¬ìŠ¤íŠ¸ ì»¨íŠ¸ë¡¤ (ì´ë¯¸ì§€ 1 ì°¸ê³ ) */
  .list-controls {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 20px;
    padding-bottom: 15px;
    border-bottom: 2px solid #eee;
  }
  /* ê²€ìƒ‰ì°½ */
  .course-search-bar {
    display: flex;
    gap: 5px;
  }
  .course-search-bar select,
  .course-search-bar input {
    padding: 8px 12px;
    border: 1px solid #ccc;
    border-radius: 5px;
    font-size: 0.95rem;
  }
  .course-search-bar input {
    width: 250px;
  }
  .course-search-bar button {
    padding: 8px 16px;
    border: none;
    background: #5e5e5e; /* ë©”ì¸ í™ˆ ê²€ìƒ‰ë²„íŠ¼ ìƒ‰ìƒ */
    color: white;
    border-radius: 5px;
    font-weight: bold;
    cursor: pointer;
  }

  /* âœ¨ ì •ë ¬ (ìˆ˜ì •ë¨) */
  .sort-options {
    font-size: 0.95rem;
    color: #ccc; /* | ë¬¸ì ìƒ‰ìƒì„ ì—°í•˜ê²Œ ë³€ê²½ */
  }
  .sort-options a {
    color: #777;
    text-decoration: none;
    margin: 0 8px; /* âœ¨ ì¢Œìš° ì—¬ë°±ì„ ì¤˜ì„œ | ì™€ì˜ ê°„ê²©ì„ ë™ì¼í•˜ê²Œ ë§ì¶¤ */
  }
  .sort-options a:first-child {
      margin-left: 0; /* âœ¨ ì²«ë²ˆì§¸ ë§í¬ì˜ ì™¼ìª½ ì—¬ë°± ì œê±° */
  }
  .sort-options a.active,
  .sort-options a:hover {
    color: #333;
    font-weight: bold;
  }
  
  /* ê°•ì˜ ëª©ë¡ */
  .course-list {
    display: flex;
    flex-direction: column;
    gap: 20px;
  }

  /* ê°œë³„ ê°•ì˜ ë°•ìŠ¤ (ì´ë¯¸ì§€ 3 ê¸°ë°˜) */
  .course-item-box {
    background: #fdfdfd;
    border: 1px solid #e9e9e9;
    border-radius: 10px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.05);
    overflow: hidden;
  }
  /* ê°•ì˜ ì œëª© (ì´ëª¨í‹°ì½˜ ì •ë ¬ CSS ì¶”ê°€) */
  .course-item-title {
    font-size: 1.3rem;
    font-weight: 600;
    padding: 20px;
    background: #f9f9f9;
    border-bottom: 1px solid #e9e9e9;
    display: flex; /* ì•„ì´ì½˜ ì •ë ¬ */
    align-items: center; /* ì•„ì´ì½˜ ì •ë ¬ */
    gap: 10px; /* ì•„ì´ì½˜ê³¼ í…ìŠ¤íŠ¸ ê°„ê²© */
  }
  .course-item-content {
    display: flex;
    padding: 25px;
    gap: 20px;
  }
  .details-left, .details-right {
    flex: 1;
  }
  .details-left ul, .details-right ul {
    list-style: none;
    line-height: 2.2;
  }
  .details-left li, .details-right li {
    display: flex;
  }
  .details-left .label, .details-right .label {
    width: 100px;
    font-weight: 500;
    color: #555;
  }
  .details-left .value, .details-right .value {
    color: #333;
  }
  .details-left .value.status-ing { color: #c90000; font-weight: bold; } /* ë¯¸ìˆ˜ë£Œ(ìˆ˜ê°•ì¤‘) */
  .details-left .value.status-done { color: #005a9c; font-weight: bold; } /* ìˆ˜ë£Œì™„ë£Œ */

  /* ì§„ë„ìœ¨ ë°” (ì´ë¯¸ì§€ 3) */
  .progress-bar-container {
    width: 100%;
    background: #eee;
    border-radius: 15px;
    height: 20px;
    overflow: hidden;
    margin-top: 5px;
  }
  .progress-bar-fill {
    height: 100%;
    background: #2d3b6b; /* ë©”ì¸ í™ˆ ê³µì§€ì‚¬í•­ ë²„íŠ¼ ìƒ‰ìƒ */
    border-radius: 15px;
    text-align: right;
    color: white;
    font-size: 0.8rem;
    font-weight: bold;
    padding-right: 8px;
    line-height: 20px;
  }

  /* ê°•ì˜ì‹¤ ë²„íŠ¼ (ì´ë¯¸ì§€ 3) */
  .course-item-actions {
    flex-basis: 180px; /* ë²„íŠ¼ ì˜ì—­ ë„ˆë¹„ ê³ ì • */
    display: flex;
    flex-direction: column;
    justify-content: center;
    gap: 10px;
  }
  .course-item-actions button {
    padding: 12px;
    font-size: 1rem;
    font-weight: bold;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    transition: background 0.2s;
  }
  /* ê°•ì˜ì‹¤ ì…ì¥ (ì£¼ìš” ë²„íŠ¼) */
  .btn-primary {
    background: #2d3b6b; /* ë©”ì¸ í™ˆ ê³µì§€ì‚¬í•­ ë²„íŠ¼ ìƒ‰ìƒ */
    color: white;
  }
  .btn-primary:hover { background: #1b2541; }
  /* êµìœ¡ ì†Œê°œ (ë³´ì¡° ë²„íŠ¼) */
  .btn-secondary {
    background: #5e5e5e; /* ë©”ì¸ í™ˆ ê²€ìƒ‰ ë²„íŠ¼ ìƒ‰ìƒ */
    color: white;
  }
  .btn-secondary:hover { background: #444; }

  /* í˜ì´ì§€ë„¤ì´ì…˜ (course_list.htmlê³¼ ë™ì¼) */
  .pagination {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 8px;
    margin-top: 30px;
  }
  .pagination a,
  .pagination span {
    display: flex;
    justify-content: center;
    align-items: center;
    width: 34px;
    height: 34px;
    text-decoration: none;
    color: #555;
    border: 1px solid #ddd;
    border-radius: 5px;
    transition: background 0.2s;
  }
  .pagination a:hover {
    background: #f0f0f0;
  }
  .pagination span.active {
    background: #2d3b6b;
    color: white;
    border-color: #2d3b6b;
    font-weight: bold;
  }

  /* ë°˜ì‘í˜• (ë©”ì¸ í™ˆê³¼ ë™ì¼) */
  @media (max-width:768px){
    nav { flex-direction:column; gap:8px; }
    .nav-center { position:static; transform:none; justify-content:center; margin-bottom:5px; }
    .nav-right { justify-content:center; margin-left:0; gap:10px; }
    .page-wrapper { padding-top: 150px; } /* ë„¤ë¹„ ë†’ì´ ì¦ê°€ë¡œ íŒ¨ë”© ì¦ê°€ */
    .content-container { width: 95%; padding: 20px 15px; }
    .page-title { font-size: 1.8rem; }
    
    /* ëŒ€ì‹œë³´ë“œ ë°˜ì‘í˜• */
    .status-dashboard { flex-wrap: wrap; gap: 10px; }
    .status-box { width: calc(50% - 5px); } /* 2x2 ê·¸ë¦¬ë“œ */
    
    /* ì»¨íŠ¸ë¡¤ ë°˜ì‘í˜• */
    .list-controls { flex-direction: column; align-items: stretch; gap: 15px; }
    .course-search-bar { flex-direction: column; }
    .course-search-bar input { width: 100%; }
    .sort-options { text-align: right; }

    /* ê°•ì˜ ë°•ìŠ¤ ë°˜ì‘í˜• */
    .course-item-content { flex-direction: column; }
    .course-item-actions { flex-basis: auto; flex-direction: row; }
    .course-item-actions button { flex: 1; }
  }

</style>
</head>
<body>

<div class="top-bar">
  <header id="top"><a href="index.html">Elo</a></header>
  <nav>
    <div class="nav-center">
      <a href="intro.html">ì†Œê°œ</a>
      <a href="course_application.html">ì¸í„°ë„·êµìœ¡</a>
      <a href="my_classroom.html">ë‚˜ì˜ ê°•ì˜ì‹¤</a>
      <a href="notice.html">êµìœ¡ì§€ì›</a>
    </div>
<div class="nav-right">
  <a id="loginMenu" href="login.html">ë¡œê·¸ì¸</a>
  <a id="joinMenu" href="join.html">íšŒì›ê°€ì…</a>

   <a id="mypageMenu" href="mypage.html" style="display:none;">ë§ˆì´í˜ì´ì§€</a>
  <a id="logoutMenu" href="#" style="display:none;" onclick="logout()">ë¡œê·¸ì•„ì›ƒ</a>
</div>

  </nav>
</div>

<div class="page-wrapper">
  <div class="content-container">
    
    <h1 class="page-title">ë‚˜ì˜ ê°•ì˜ì‹¤</h1>

<div class="status-dashboard">
  <div class="status-box">
    <div class="status-title">ìˆ˜ê°•ì‹ ì²­</div>
    <div class="status-count">0</div>
  </div>
  <div class="status-box"> 
    <div class="status-title">ìˆ˜ê°•ì¤‘</div>
    <div class="status-count">0</div>
  </div>
  <div class="status-box">
    <div class="status-title">ìˆ˜ë£Œ</div>
    <div class="status-count">0</div>
  </div>
  <div class="status-box">
    <div class="status-title">ë¯¸ìˆ˜ë£Œ</div>
    <div class="status-count">0</div>
  </div>
</div>


    <div class="list-controls">
      <div class="course-search-bar">
        <select>
          <option>ì „ì²´</option>
          <option>ì˜ìƒëª…</option>
        </select>
        <input type="text" placeholder="ì˜ìƒëª…ì„ ì…ë ¥í•˜ì„¸ìš”.">
        <button>ê²€ìƒ‰</button>
      </div>
      <div class="sort-options">
        <a href="#" class="active">ìµœì‹ ìˆœ</a> |
        <a href="#">ì§„ë„ìœ¨ìˆœ</a> |
        <a href="#">ì œëª©ìˆœ</a>
      </div>
      
    </div>
    <div class="course-list" id="courseList"></div>


    

    </div>

    <div class="pagination">
      <a href="#">&lt;&lt;</a>
      <a href="#">&lt;</a>
      <span class="active">1</span>
      <a href="#">&gt;</a>
      <a href="#">&gt;&gt;</a>
    </div>

  </div>
</div>

<footer class="footer">
  <div class="footer-links">
    <a href="#">ê°œì¸ì •ë³´ì²˜ë¦¬ë°©ì¹¨</a>
    <span>|</span>
    <a href="#">ê´€ë ¨ì‚¬ì´íŠ¸ ë°”ë¡œê°€ê¸°</a>
  </div>
  <div class="footer-info">
    <p>ì£¼ì†Œ: ì„œìš¸íŠ¹ë³„ì‹œ ì¤‘êµ¬ ì†ŒíŒŒë¡œ2ê¸¸ 10</p>
    <p>ì „í™”: 02-1234-5678</p>
    <p>ê³ ê°ì§€ì›: <a href="#">ë‹´ë‹¹ì ì—°ë½ì²˜ ë°”ë¡œê°€ê¸°</a> (í‰ì¼ 09:00~18:00)</p>
  </div>
  <div class="footer-copy">
    COPYRIGHT 2025 Â© KOSHA ALL RIGHT RESERVED.
  </div>
</footer>

<script>
document.addEventListener("DOMContentLoaded", async () => {

  // ë¡œê·¸ì¸ ë©”ë‰´ ì²˜ë¦¬
  const user = localStorage.getItem("currentUser");

  if (user) {
    document.getElementById("loginMenu").style.display = "none";
    document.getElementById("joinMenu").style.display = "none";
    document.getElementById("mypageMenu").style.display = "block";
    document.getElementById("logoutMenu").style.display = "block";
  } else {
    document.getElementById("loginMenu").style.display = "block";
    document.getElementById("joinMenu").style.display = "block";
    document.getElementById("mypageMenu").style.display = "none";
    document.getElementById("logoutMenu").style.display = "none";
    
    alert("ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.");
    location.href = "login.html";
    return;
  }

  // =============================
  // ğŸ”¥ ì—¬ê¸°ë¶€í„°ëŠ” ë‚˜ì˜ê°•ì˜ì‹¤ ë°ì´í„° ë¡œë“œ
  // =============================

  const courseList = document.getElementById("courseList");

  try {
    const res = await fetch(`https://elo-backend-5r5z.onrender.com/progress/list?userId=${user}`);
    const result = await res.json();

    if (!result.success || result.courses.length === 0) {
      courseList.innerHTML = `
        <p style="text-align:center; padding:40px 0; color:#666; font-size:1.1rem;">
          í˜„ì¬ ìˆ˜ê°• ì¤‘ì¸ ê°•ì˜ê°€ ì—†ìŠµë‹ˆë‹¤.
        </p>`;
      return;
    }

    const data = result.courses;

    const total = data.length;
    const completed = data.filter(c => c.progress >= 100).length;
    const ing = data.filter(c => c.progress > 0 && c.progress < 100).length;
    const none = data.filter(c => c.progress === 0).length;

    document.querySelectorAll(".status-count")[0].textContent = total;
    document.querySelectorAll(".status-count")[1].textContent = ing;
    document.querySelectorAll(".status-count")[2].textContent = completed;
    document.querySelectorAll(".status-count")[3].textContent = none;

    let html = "";

    data.forEach(item => {
      const statusText =
        item.progress >= 100 ? "ìˆ˜ë£Œ ì™„ë£Œ" :
        item.progress > 0 ? "ìˆ˜ê°•ì¤‘" : "ë¯¸ìˆ˜ë£Œ";

      const statusClass =
        item.progress >= 100 ? "status-done" : "status-ing";

      html += `
        <div class="course-item-box">
          <h3 class="course-item-title">ğŸ“˜ ${item.title}</h3>
          <div class="course-item-content">
            <div class="details-left">
              <ul>
                <li>
                  <span class="label">ìˆ˜ë£Œì—¬ë¶€</span>
                  <span class="value ${statusClass}">${statusText}</span>
                </li>
                <li>
                  <span class="label">ë‚˜ì˜ì§„ë„ìœ¨</span>
                  <div class="progress-bar-container">
                    <div class="progress-bar-fill" style="width: ${item.progress}%; ">
                      ${item.progress}%
                    </div>
                  </div>
                </li>
              </ul>
            </div>
            <div class="details-right">
              <ul>
                <li>
                  <span class="label">ì´ìˆ˜ê¸°ì¤€</span>
                  <span class="value">ì§„ë„ìœ¨ 100% ì™„ë£Œ</span>
                </li>
              </ul>
            </div>
            <div class="course-item-actions">
              <button class="btn-primary" onclick="location.href='${item.link}'">
                ê°•ì˜ì‹¤ì…ì¥
              </button>
              ${item.progress >= 100 
                ? `<button class="btn-secondary">ìˆ˜ë£Œì¦ ì¶œë ¥</button>`
                : `<button class="btn-secondary" disabled style="opacity:0.4;">ìˆ˜ë£Œì¦ ì¶œë ¥</button>`}
            </div>
          </div>
        </div>`;
    });

    courseList.innerHTML = html;

  } catch (err) {
    console.error(err);
    courseList.innerHTML = `<p style="padding:40px; text-align:center; color:red;">
      ì§„í–‰ ì¤‘ì¸ ê°•ì˜ê°€ ì—†ìŠµë‹ˆë‹¤.
    </p>`;
  }
});

</script>



</body>
</html>